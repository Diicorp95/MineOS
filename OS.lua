local a=component.proxy(component.proxy(component.list("eeprom")()).getData())function dofile(b)local c,d=a.open(b,"r")if c then local e,f=""while true do f=a.read(c,math.huge)if f then e=e..f else break end end;a.close(c)local g,d=load(e,"="..b)if g then return g()else error(d)end else error(d)end end;package={paths={["/Libraries/"]=true},loaded={},loading={}}local function h(b)return a.exists(b)end;function require(i)local j=unicode.lower(i)if package.loaded[j]then return package.loaded[j]elseif package.loading[j]then error("recursive require() call found: library \""..i.."\" is trying to require another library that requires it\n"..debug.traceback())else local k={}local function l(m)if h(m)then return m else table.insert(k,"  variant \""..m.."\" not exists")end end;local function n(b,i)return l(b..i..".lua")or l(b..i)or l(i)end;local o;for b in pairs(package.paths)do o=n(b,i)or n(b,unicode.upper(unicode.sub(i,1,1))..unicode.sub(i,2,-1))if o then package.loading[j]=true;local g=dofile(o)package.loaded[j]=g or true;package.loading[j]=nil;return g end end;error("unable to locate library \""..i.."\":\n"..table.concat(k,"\n"))end end;local p=component.proxy(component.list("gpu")())local q,r=p.getResolution()local s,t=13,1;local function u(i)local function v(w)return math.floor(q/2-w/2)end;local x,w,y="MineOS",26,14;local z,A,B=v(w),math.floor(r/2-1),math.ceil(w*t/s)t=t+1;p.setForeground(0x2D2D2D)p.set(v(#x),A,x)p.setForeground(0x878787)p.set(z,A+2,string.rep("─",B))p.setForeground(0xC3C3C3)p.set(z+B,A+2,string.rep("─",w-B))return require(i)end;p.setBackground(0xE1E1E1)p.fill(1,1,q,r," ")bit32=bit32 or u("Bit32")local C=u("Paths")local D=u("Event")local E=u("Filesystem")E.setProxy(a)h=function(m)return E.exists(m)end;u("Component")u("Keyboard")u("Color")u("Text")u("Number")local F=u("Image")local G=u("Screen")G.setGPUProxy(p)local H=u("GUI")local I=u("System")u("Network")package.loaded.bit32=bit32;package.loaded.computer=computer;package.loaded.component=component;package.loaded.unicode=unicode;local J=H.workspace()I.setWorkspace(J)local K,L,M,N,O,P=0.3;D.addHandler(function(Q,R,z,A,S,T)if Q=="touch"then local U=computer.uptime()if L==z and M==A and N==S and P==R and U-O<=K then computer.pushSignal("double_touch",R,z,A,S,T)D.skip("touch")end;L,M,N,O,P=z,A,S,U,R end end)D.addHandler(function(Q,R,V)if(Q=="component_added"or Q=="component_removed")and V=="screen"then local p=G.getGPUProxy()local function W(X)G.bind(X,false)p.setDepth(p.maxDepth())J:draw()end;if Q=="component_added"then if not p.getScreen()then W(R)end else if not p.getScreen()then local X=component.list("screen")()if X then W(X)end end end end end)I.authorize()while true do local Y,b,Z,_=I.call(J.start,J,0)if Y then break else I.updateWorkspace()I.updateDesktop()J:draw()I.error(b,Z,_)J:draw()end end
